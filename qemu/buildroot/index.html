
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../thirdparty/" rel="prev"/>
<link href="../appdev/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.3, mkdocs-material-9.1.11" name="generator"/>
<title>Buildroot - Embedded Systems Linux Development Notes</title>
<link href="../../assets/stylesheets/main.85bb2934.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#buildroot">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Embedded Systems Linux Development Notes" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Embedded Systems Linux Development Notes">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Embedded Systems Linux Development Notes
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Buildroot
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Embedded Systems Linux Development Notes" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Embedded Systems Linux Development Notes">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Embedded Systems Linux Development Notes
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
        Overview
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          QEMU variant
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          QEMU variant
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../virtualbox/">
        Host VM
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../toolchain/">
        Building a cross-compile toolchain
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../bootloader/">
        Bootloader - U-Boot
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../kernel/">
        Linux Kernel
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tinysystem/">
        Tiny embedded system with BusyBox
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hardware/">
        Accessing Hardware Devices
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../blockfs/">
        Block Filesystems
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../thirdparty/">
        Third-party libraries and apps
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Buildroot
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Buildroot
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#objectives">
    Objectives
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#required-tools">
    Required tools
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#source-code">
    Source code
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration">
    Configuration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#build">
    Build
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#run-the-generated-system">
    Run the generated system
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#analyzing-dependencies">
    Analyzing dependencies
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#backup-and-restore">
    Backup and restore
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#licensing">
    Licensing
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../appdev/">
        App - Development
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../debugging/">
        App - Remote debug
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../debootstrap/">
        debootstrap
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          BeagleBone Black variant
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          BeagleBone Black variant
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../bbb/virtualbox/">
        Host VM
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../bbb/toolchain/">
        Building a cross-compile toolchain
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../bbb/bootloader/">
        Bootloader - U-Boot
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../bbb/kernel/">
        Linux Kernel
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../bbb/tinysystem/">
        Tiny embedded system with BusyBox
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../bbb/hardware/">
        Accessing Hardware Devices
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../bbb/blockfs/">
        Block Filesystems
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../bbb/thirdparty/">
        Third-party libraries and apps
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../bbb/buildroot/">
        Buildroot
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../bbb/integration/">
        System integration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../bbb/appdev/">
        App - Development
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Knowledge Base
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Knowledge Base
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../kb/git-hash/">
        git commit hash expansion
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kb/menuconfig/">
        menuconfig
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kb/processors/">
        Processors
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../copying/">
        Copying this document
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#objectives">
    Objectives
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#required-tools">
    Required tools
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#source-code">
    Source code
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration">
    Configuration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#build">
    Build
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#run-the-generated-system">
    Run the generated system
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#analyzing-dependencies">
    Analyzing dependencies
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#backup-and-restore">
    Backup and restore
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#licensing">
    Licensing
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="buildroot"><span class="enumerate-headings-plugin enumerate-heading-plugin">10.</span> Buildroot</h1>
<h2 id="objectives"><span class="enumerate-headings-plugin enumerate-heading-plugin">10.1</span> Objectives</h2>
<ul>
<li>discover how a build system is used and how it works, with the example of the Buildroot build system.</li>
</ul>
<p>Compared to the previous lab, we are going to build a more elaborate system, still containing <code>alsa-utils</code> (and of course its <code>alsa-lib</code> dependency), but this time using <em>Buildroot</em>, an automated build system.</p>
<p>The automated build system will also allow us to add more packages and play real audio on our system, thanks to the <a href="https://www.musicpd.org/"><em>Music Player Daemon</em> (<code>mpd</code>)</a> and its <code>mpc</code> client.</p>
<p><em>Important note: because of the current sound playing issues mentioned before, this lab will be less exhaustive compared to our instructions on real hardware. You should be able to run the commands in the <em>QEMU</em> emulated machine though, proving that the tools were built correctly. So, we will build tools like mpd and mpc, but won’t test them because of the absence of sound.</em></p>
<h2 id="required-tools"><span class="enumerate-headings-plugin enumerate-heading-plugin">10.2</span> Required tools</h2>
<ul>
<li>
<p>Our <a href="../toolchain/"><em>cross-compile toolchain</em></a></p>
</li>
<li>
<p>Ubuntu packages:</p>
<p><code>evince</code>
<code>graphviz</code></p>
<p>plus those from the previous labs.</p>
</li>
<li>
<p><a href="https://buildroot.org/"><em>Buildroot</em></a>, either as:</p>
<ul>
<li>
<p><a href="https://git.buildroot.net/buildroot/"><em>git</em> repository</a> tag <code>v2022.02</code></p>
</li>
<li>
<p><a href="https://git.buildroot.net/buildroot/snapshot/buildroot-2022.02.tar.bz2">Source code archive for release <code>v2022.02</code></a></p>
</li>
</ul>
</li>
</ul>
<h2 id="source-code"><span class="enumerate-headings-plugin enumerate-heading-plugin">10.3</span> Source code</h2>
<p>The official <em>Buildroot</em> website is available at <a href="https://buildroot.org/">https://buildroot.org/</a>.<br/>
Let's clone the <em>git</em> repository, branching the <code>2022.02</code> release, which is a <em>LTS</em> (<em>Long Term Support</em>, we're just sticking to the original one), naming after this lab.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="gp">$ </span><span class="nv">LAB_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/embedded-linux-qemu-labs/buildroot"</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="nv">$LAB_PATH</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="gp">$ </span><span class="nv">label</span><span class="o">=</span><span class="s2">"2022.02"</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>https://git.buildroot.net/buildroot/
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>buildroot/
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>embedded-linux-qemu<span class="w"> </span><span class="nv">$label</span>
</span></code></pre></div>
<p>Alternatively, you can download an archived version.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="gp">$ </span><span class="nv">LAB_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/embedded-linux-qemu-labs/buildroot"</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="nv">$LAB_PATH</span>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="gp">$ </span><span class="nv">label</span><span class="o">=</span><span class="s2">"2022.02"</span>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="gp">$ </span>wget<span class="w"> </span><span class="s2">"https://git.buildroot.net/buildroot/snapshot/buildroot-</span><span class="si">${</span><span class="nv">label</span><span class="si">}</span><span class="s2">.tar.bz2"</span>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="gp">$ </span>tar<span class="w"> </span>xfv<span class="w"> </span><span class="s2">"buildroot-</span><span class="si">${</span><span class="nv">label</span><span class="si">}</span><span class="s2">.tar.bz2"</span>
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="gp">$ </span>mv<span class="w"> </span>buildroot*/<span class="w"> </span>buildroot
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>buildroot/
</span></code></pre></div>
<p>Several subdirectories or files are visible. The most important ones are:</p>
<ul>
<li>
<p><code>boot</code> contains the <em>Makefiles</em> and configuration items related to the compilation of common bootloaders (<em>GRUB</em>, <em>U-Boot</em>, <em>Barebox</em>, etc.)</p>
</li>
<li>
<p><code>board</code> contains board specific configurations and <em>root</em> filesystem <em>overlays</em>.</p>
</li>
<li>
<p><code>configs</code> contains a set of predefined configurations, similar to the concept of <em>defconfig</em> in the kernel.</p>
</li>
<li>
<p><code>docs</code> contains the documentation for <em>Buildroot</em>.</p>
</li>
<li>
<p><code>fs</code> contains the code used to generate the various <em>root</em> filesystem image formats.</p>
</li>
<li>
<p><code>linux</code> contains the <em>Makefile</em> and configuration items related to the compilation of the Linux kernel.</p>
</li>
<li>
<p><code>Makefile</code> is the main <em>Makefile</em> that we will use to use <em>Buildroot</em>: everything works through <em>Makefiles</em> in Buildroot;</p>
</li>
<li>
<p><code>package</code> is a directory that contains all the <em>Makefiles</em>, patches, and configuration items to compile the <em>user space</em> applications and libraries of your embedded Linux system.<br/>
  Have a look at various subdirectories and see what they contain.</p>
</li>
<li>
<p><code>system</code> contains the root filesystem skeleton and the <em>device tables</em> used for a static <code>/dev</code>.</p>
</li>
<li>
<p><code>toolchain</code> contains the <em>Makefiles</em>, patches and configuration items to generate the cross-compiling toolchain.</p>
</li>
</ul>
<h2 id="configuration"><span class="enumerate-headings-plugin enumerate-heading-plugin">10.4</span> Configuration</h2>
<p>In our case, we would like to:</p>
<ul>
<li>
<p>Generate an embedded Linux system for ARM.</p>
</li>
<li>
<p>Use an already existing external toolchain instead of having <em>Buildroot</em> generating one for us.</p>
</li>
<li>
<p>Compile the Linux kernel and deploy its modules in the <em>root</em> filesystem.</p>
</li>
<li>
<p>Integrate <em>BusyBox</em>, <code>alsa-utils</code>, <code>mpd</code>, <code>mpc</code> and <code>evtest</code> in our embedded Linux system.</p>
</li>
<li>
<p>Integrate the target filesystem into a <em>tarball</em>.</p>
</li>
</ul>
<p>To run the configuration utility of <em>Buildroot</em>, simply run:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="gp">$ </span>make<span class="w"> </span>menuconfig
</span></code></pre></div>
<p>Set the following options. Don’t hesitate to press the <code>Help</code> button whenever you need more details about a given option!</p>
<p>In <code>Target options</code>:</p>
<ul>
<li>
<p><code>Target Architecture</code> = <code>ARM (little endian)</code>.</p>
</li>
<li>
<p><code>Target Architecture Variant</code> = <code>cortex-A9</code>.</p>
</li>
<li>
<p>Enable <code>NEON SIMD extension support</code>.</p>
</li>
<li>
<p>Enable <code>VFP extension support</code>.</p>
</li>
<li>
<p><code>Target ABI</code> = <code>EABIhf</code>.</p>
</li>
<li>
<p><code>Floating point strategy</code> = <code>VFPv3-D16</code>.</p>
</li>
</ul>
<p>In <code>Toolchain</code>:</p>
<ul>
<li>
<p><code>Toolchain type</code> = <code>External toolchain</code>.</p>
</li>
<li>
<p><code>Toolchain</code> = <code>Custom toolchain</code>.</p>
</li>
<li>
<p><code>Toolchain path</code> = <code>$(HOME)/x-tools/arm-training-linux-uclibcgnueabihf</code>, which is the one we built.</p>
</li>
<li>
<p><code>External toolchain gcc version</code> = <code>11.x</code>.</p>
</li>
<li>
<p><code>External toolchain kernel headers series</code> = <code>5.15.x</code>.</p>
</li>
<li>
<p><code>External toolchain C library</code> = <code>uClibc/uClibc-ng</code>.</p>
</li>
<li>
<p>Enable <code>Toolchain has WCHAR support?</code>.</p>
</li>
<li>
<p>Enable <code>Toolchain has SSP support?</code>.</p>
</li>
<li>
<p>Enable <code>Toolchain has C++ support?</code>.</p>
</li>
</ul>
<p>In <code>Kernel</code>:</p>
<ul>
<li>
<p>Enable <code>Linux Kernel</code>.</p>
</li>
<li>
<p><code>Kernel version</code> = <code>Latest version (5.15)</code>.</p>
</li>
<li>
<p><code>Defconfig name</code> = <code>vexpress</code>.</p>
</li>
<li>
<p>Enable <code>Build a Device Tree Blob (DTB)</code>.</p>
</li>
<li>
<p><code>In-tree Device Tree Source file names</code> = <code>vexpress-v2p-ca9</code>.</p>
</li>
</ul>
<p>In <code>Target packages</code>:</p>
<ul>
<li>
<p>Keep <code>BusyBox (default version)</code> and keep the <em>BusyBox</em> configuration proposed by <em>Buildroot</em>.</p>
</li>
<li>
<p>Under <code>Audio and video applications</code>:</p>
<ul>
<li>
<p>Enable <code>alsa-utils</code>, and in the submenu:</p>
<ul>
<li>
<p>Enable <code>alsamixer</code>. You will be able to test this application too, and that will also pull the <code>ncurses</code> library, which we will also use in the next lab.</p>
</li>
<li>
<p>Enable <code>speaker-test</code>.</p>
</li>
</ul>
</li>
<li>
<p>Enable <code>mpd</code>, and in the submenu:</p>
<ul>
<li>Keep only <code>alsa</code>, <code>vorbis</code> and <code>tcp sockets</code>.</li>
</ul>
</li>
<li>
<p>Enable <code>mpd-mpc</code>.</p>
</li>
</ul>
</li>
</ul>
<p>In <code>Filesystem images</code>:</p>
<ul>
<li>Enable <code>tar the root filesystem</code>.</li>
</ul>
<p>Exit the <code>menuconfig</code> interface saving into the usual <code>.config</code> file. Also make a backup copy for reference.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="gp">$ </span>cp<span class="w"> </span>.config<span class="w"> </span>../buildroot.config
</span></code></pre></div>
<h2 id="build"><span class="enumerate-headings-plugin enumerate-heading-plugin">10.5</span> Build</h2>
<p>Just run the canonical <code>make</code>:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="gp">$ </span>make
</span></code></pre></div>
<p><em>Buildroot</em> will first create a small environment with the external toolchain, then download,
extract, configure, compile, and install each component of the embedded system.</p>
<p>All the compilation has taken place in the <code>output/</code> subdirectory. Let’s explore its content:</p>
<ul>
<li>
<p><code>build</code> is the directory in which each component built by <em>Buildroot</em> is extracted, and where the build actually takes place.</p>
</li>
<li>
<p><code>host</code> is the directory where <em>Buildroot</em> installs some components for the host.<br/>
  As <em>Buildroot</em> doesn’t want to depend on too many things installed in the developer machines, it installs some tools needed to compile the packages for the target.<br/>
  In our case it installed <code>pkg-config</code> (since the version of the host may be ancient) and tools to generate the root filesystem image (<code>genext2fs</code>, <code>makedevs</code>, <code>fakeroot</code>).</p>
</li>
<li>
<p><code>images</code> which contains the final images produced by <em>Buildroot</em>. In our case it contains a <em>tarball</em> of the filesystem, called <code>rootfs.tar</code>, plus the compressed kernel and <em>DTB</em> (<em>Device Tree Binary</em>).<br/>
  Depending on the configuration, there could also a bootloader binary or a full SD card image.</p>
</li>
<li>
<p><code>staging</code>, which contains the "build" space of the target system, all the target libraries, with headers and documentation.<br/>
  It also contains the system headers and the C library, which in our case have been copied from the cross-compiling toolchain.</p>
</li>
<li>
<p><code>target</code> is the target <em>root</em> filesystem. All the applications and libraries, usually <em>stripped</em>, are
installed in this directory.<br/>
  However, it cannot be used directly as the <em>root</em> filesystem, as all the device files are missing: it is not possible to create them without being <em>root</em>, and <em>Buildroot</em> has a policy of not running anything as <em>root</em>.</p>
</li>
</ul>
<h2 id="run-the-generated-system"><span class="enumerate-headings-plugin enumerate-heading-plugin">10.6</span> Run the generated system</h2>
<p>Go back to the <code>$HOME/embedded-linux-qemu-labs/buildroot/</code> directory.<br/>
Create a new <code>nfsroot</code> directory that is going to hold our system, exported over NFS.<br/>
Go into this directory, and untar the <em>rootfs</em>.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="gp">$ </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">"</span><span class="nv">$LAB_PATH</span><span class="s2">/nfsroot/"</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="s2">"</span><span class="nv">$LAB_PATH</span><span class="s2">/nfsroot/"</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="gp">$ </span>tar<span class="w"> </span>xfv<span class="w"> </span><span class="s2">"../buildroot/output/images/rootfs.tar"</span>
</span></code></pre></div>
<p>Add this new <code>nfsroot</code> directory to the list of directories exported by NFS in <code>/etc/exports</code>.
You could just replace the <em>symlink</em> we used for <em>BusyBox</em>, pointing instead to this new <code>nfsroot</code>.<br/></p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="gp">$ </span>sudo<span class="w"> </span>rm<span class="w"> </span>-f<span class="w"> </span>/srv/nfs
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="gp">$ </span>sudo<span class="w"> </span>ln<span class="w"> </span>-snv<span class="w"> </span><span class="s2">"</span><span class="nv">$LAB_PATH</span><span class="s2">/nfsroot/"</span><span class="w"> </span>/srv/nfs
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="go">'/srv/nfs' -&gt; '/home/me/embedded-linux-qemu-labs/buildroot/nfsroot/'</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="gp">$ </span>sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span>tftp:tftp<span class="w"> </span>/srv/nfs
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="gp">$ </span>sudo<span class="w"> </span>exportfs<span class="w"> </span>-ar
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>nfs-kernel-server
</span></code></pre></div>
<p>Also update the kernel and <em>Device Tree Binaries</em> used by your board, from the ones compiled by <em>Buildroot</em> in <code>output/images/</code>.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="s2">"</span><span class="nv">$LAB_PATH</span><span class="s2">/buildroot/output/"</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="gp">$ </span>cp<span class="w"> </span>images/zImage<span class="w"> </span>/srv/tftp/zImage-buildroot
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="gp">$ </span>cp<span class="w"> </span>images/zImage<span class="w"> </span>/srv/tftp/zImage
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="gp">$ </span>cp<span class="w"> </span><span class="k">$(</span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">"vexpress-v2p-ca9.dtb"</span><span class="k">)</span><span class="w"> </span>/srv/tftp/
</span></code></pre></div>
<p>You should restore <em>U-Boot</em> to work with TFTP and NFS. Run <em>QEMU</em>, press a key to reach the <em>U-Boot</em> prompt, and restore the environment variables. Finally, reset the board.<br/>
You should now be able to log in (<code>root</code> account, no password) to reach a shell.</p>
<div class="language-console highlight"><span class="filename">QEMU - U-Boot</span><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="go">    ...</span>
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="go">Hit any key to stop autoboot:  0</span>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="go">=&gt; setenv bootcmd "tftp 0x61000000 zImage;  tftp 0x62000000 vexpress-v2p-ca9.dtb;  bootz 0x61000000 - 0x62000000"</span>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="go">=&gt; setenv bootargs console=ttyAMA0 root=/dev/nfs ip=${ipaddr}::${serverip}:${netmask}:: nfsroot=${serverip}:${servernfs},nfsvers=3,tcp rw</span>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="go">=&gt; saveenv</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="go">=&gt; reset</span>
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="go">    ...</span>
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a>
</span><span id="__span-8-9"><a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="go">Welcome to Buildroot</span>
</span><span id="__span-8-10"><a href="#__codelineno-8-10" id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="go">buildroot login: root</span>
</span><span id="__span-8-11"><a href="#__codelineno-8-11" id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="gp">#</span>
</span></code></pre></div>
<p>You can run <code>speaker-test</code> to check that this application works; note that the sound might stutter within <em>QEMU</em>.</p>
<div class="language-console highlight"><span class="filename">QEMU - Buildroot</span><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="gp"># </span>speaker-test<span class="w"> </span>-t<span class="w"> </span>sine<span class="w"> </span>-l<span class="w"> </span><span class="m">1</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="go">speaker-test 1.2.6</span>
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a>
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="go">Playback device is default</span>
</span><span id="__span-9-6"><a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="go">Stream parameters are 48000Hz, S16_LE, 1 channels</span>
</span><span id="__span-9-7"><a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="go">Sine wave rate is 440.0000Hz</span>
</span><span id="__span-9-8"><a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="go">Rate set to 48000Hz (requested 48000Hz)</span>
</span><span id="__span-9-9"><a href="#__codelineno-9-9" id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="go">Buffer size range from 256 to 16384</span>
</span><span id="__span-9-10"><a href="#__codelineno-9-10" id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="go">Period size range from 64 to 1024</span>
</span><span id="__span-9-11"><a href="#__codelineno-9-11" id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="go">Using max buffer size 16384</span>
</span><span id="__span-9-12"><a href="#__codelineno-9-12" id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="go">Periods = 4</span>
</span><span id="__span-9-13"><a href="#__codelineno-9-13" id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="go">was set period_size = 1024</span>
</span><span id="__span-9-14"><a href="#__codelineno-9-14" id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="go">was set buffer_size = 16384</span>
</span><span id="__span-9-15"><a href="#__codelineno-9-15" id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="go"> 0 - Front Left</span>
</span><span id="__span-9-16"><a href="#__codelineno-9-16" id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="go">Time per period = 3.791015</span>
</span></code></pre></div>
<p>You can also test the <code>alsamixer</code> command too.</p>
<!--
Custom code block formatting, because otherwise it would render with mixed font families.
The default "monospace" font should make it more portable.
-->
<div class="language-console highlight"><span class="filename">QEMU - Buildroot</span>
<pre><code><span class="gp"># </span>alsamixer<span class="go" style="font-family: monospace !important">
┌────────────────────────────── AlsaMixer v1.2.6 ──────────────────────────────┐
│ Card: ARM AC'97 Interface                            F1:  Help               │
│ Chip: National Semiconductor LM4549                  F2:  System information │
│ View: F3:[Playback] F4: Capture  F5: All             F6:  Select sound card  │
│ Item: Master [dB gain: 0.00, 0.00]                   Esc: Exit               │
│                                                                              │
│     ┌──┐     ┌──┐     ┌──┐              ┌──┐              ┌──┐     ┌──┐      │
│     │▒▒│     │▒▒│     │▒▒│              │▒▒│              │  │     │  │      │
│     │▒▒│     │▒▒│     │▒▒│              │▒▒│              │  │     │  │      │
│     │▒▒│     │▒▒│     │▒▒│              │▒▒│              │  │     │  │      &gt;
│     │▒▒│     │▒▒│     │▒▒│              │▒▒│              │  │     │  │      &gt;
│     │▒▒│     │▒▒│     │▒▒│              │▒▒│              │  │     │  │      &gt;
│     │▒▒│     │▒▒│     │▒▒│              │▒▒│              │  │     │  │      &gt;
│     │▒▒│     │▒▒│     │▒▒│              │▒▒│              │  │     │  │      &gt;
│     │▒▒│     │▒▒│     │▒▒│              │▒▒│              │  │     │  │      &gt;
│     │▒▒│     │▒▒│     │▒▒│              │▒▒│              │  │     │  │      &gt;
│     │▒▒│     │▒▒│     │▒▒│              │▒▒│              │  │     │  │      │
│     │▒▒│     │▒▒│     │▒▒│              │▒▒│              │  │     │  │      │
│     ├──┤     ├──┤     ├──┤     ┌──┐     ├──┤    pre 3D    ├──┤     ├──┤      │
│     │MM│     │MM│     │MM│     │MM│     │MM│              │MM│     │MM│      │
│     └──┘     └──┘     └──┘     └──┘     └──┘              └──┘     └──┘      │
│   100&lt;&gt;100 100&lt;&gt;100 100&lt;&gt;100          100&lt;&gt;100            0&lt;&gt;0     0&lt;&gt;0      │
│  &lt; Master &gt;Master M Headphon 3D Contr   PCM    PCM Out    Line      CD       │
└──────────────────────────────────────────────────────────────────────────────┘</span></code></pre></div>
<p>By running the <code>ps</code> command, you may also check whether the <code>mpd</code> server was started on your system.</p>
<div class="language-console highlight"><span class="filename">QEMU - Buildroot</span><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="gp"># </span>ps<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>mpd
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="hll"><span class="go">  105 root     /usr/bin/mpd</span>
</span></span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="go">  134 root     grep mpd</span>
</span></code></pre></div>
<h2 id="analyzing-dependencies"><span class="enumerate-headings-plugin enumerate-heading-plugin">10.7</span> Analyzing dependencies</h2>
<p>It’s always useful to understand the dependencies drawn by the packages we build. First we need to install Graphviz and a PDF viewer:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="gp">$ </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>evince<span class="w"> </span>graphviz
</span></code></pre></div>
<p>Now, let’s use <em>Buildroot</em>'s target to generate a dependency graph. Once generated, it can ve viewed for visual inspection.</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="s2">"</span><span class="nv">$LAB_PATH</span><span class="s2">/buildroot/"</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="gp">$ </span>make<span class="w"> </span>graph-depends
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="go">Getting dependency tree...</span>
</span><span id="__span-12-4"><a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="go">dot  -Tpdf \</span>
</span><span id="__span-12-5"><a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="go">        -o /home/me/embedded-linux-qemu-labs/buildroot/buildroot/output/graphs/graph-depends.pdf \</span>
</span><span id="__span-12-6"><a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="go">        /home/me/embedded-linux-qemu-labs/buildroot/buildroot/output/graphs/graph-depends.dot</span>
</span><span id="__span-12-7"><a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="gp">$ </span>evince<span class="w"> </span>output/graphs/graph-depends.pdf
</span></code></pre></div>
<p>In particular, you can see that adding <em>MPD</em> and its client required to compile <em>Meson</em> for the
host, and in turn, <em>Python 3</em> for the host too. This substantially contributed to the build time.</p>
<p><img alt="graph-depends.pdf viewed through evince" src="../buildroot_graph-depends_evince.png"/></p>
<h2 id="backup-and-restore"><span class="enumerate-headings-plugin enumerate-heading-plugin">10.8</span> Backup and restore</h2>
<div class="language-console highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="s2">"</span><span class="nv">$LAB_PATH</span><span class="s2">/../bootloader/"</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="gp">$ </span>tar<span class="w"> </span>cfJv<span class="w"> </span><span class="s2">"</span><span class="nv">$LAB_PATH</span><span class="s2">/buildroot-sd.img.tar.xz"</span><span class="w"> </span>sd.img
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="s2">"</span><span class="nv">$LAB_PATH</span><span class="s2">/nfsroot/"</span>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="gp">$ </span>find<span class="w"> </span>.<span class="w"> </span>-depth<span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>cpio<span class="w"> </span>-ocv0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xz<span class="w"> </span>&gt;<span class="w"> </span><span class="s2">"</span><span class="nv">$LAB_PATH</span><span class="s2">/nfsroot-buildroot.cpio.xz"</span>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="s2">"</span><span class="nv">$LAB_PATH</span><span class="s2">/buildroot/output/images/"</span>
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="gp">$ </span>tar<span class="w"> </span>cfJv<span class="w"> </span><span class="s2">"</span><span class="nv">$LAB_PATH</span><span class="s2">/buildroot-rootfs.tar.xz"</span><span class="w"> </span>rootfs.tar
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>/srv/tftp/
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="gp">$ </span>tar<span class="w"> </span>cfJv<span class="w"> </span><span class="s2">"</span><span class="nv">$LAB_PATH</span><span class="s2">/buildroot-tftp.tar.xz"</span><span class="w"> </span>zImage<span class="w"> </span>vexpress-v2p-ca9.dtb
</span></code></pre></div>
<h2 id="licensing"><span class="enumerate-headings-plugin enumerate-heading-plugin">10.9</span> Licensing</h2>
<p>This document is an extension to: <a href="https://bootlin.com/doc/training/embedded-linux-qemu/"><em>Embedded Linux System Development - Practical Labs - QEMU Variant</em></a>
 — © 2004-2023, <em>Bootlin</em> <a href="https://bootlin.com">https://bootlin.com/</a>, <a href="(https://creativecommons.org/licenses/by-sa/3.0/)"><code>CC-BY-SA-3.0</code></a> license.</p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.fac441b0.min.js"></script>
</body>
</html>